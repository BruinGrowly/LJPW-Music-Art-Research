:root{--bg-deep: #0a0a12;--bg-dark: #12121f;--bg-medium: #1a1a2e;--bg-light: #252542;--text-primary: #e8e8f0;--text-secondary: #a0a0b8;--text-muted: #606080;--accent-mystery: #6b5b95;--accent-hope: #4ecdc4;--accent-warning: #ff6b6b;--accent-gold: #ffd93d;--accent-discovery: #7bed9f;--silence-deep: #1a0a1a;--silence-medium: #2a1a2a;--font-display: "Cinzel", serif;--font-body: "Crimson Text", serif;--font-mono: "Source Code Pro", monospace}*{margin:0;padding:0;box-sizing:border-box}html,body{height:100%;overflow:hidden}body{font-family:var(--font-body);background:var(--bg-deep);color:var(--text-primary);line-height:1.6;font-size:16px}#root{height:100%}h1,h2,h3,h4{font-family:var(--font-display);font-weight:600;letter-spacing:.02em}h1{font-size:2.5rem}h2{font-size:1.75rem}h3{font-size:1.25rem}h4{font-size:1rem}p{margin-bottom:1rem}button{font-family:var(--font-body);cursor:pointer;border:none;padding:.75rem 1.5rem;border-radius:4px;font-size:1rem;transition:all .2s ease}button:disabled{opacity:.5;cursor:not-allowed}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:var(--bg-dark)}::-webkit-scrollbar-thumb{background:var(--bg-light);border-radius:4px}::-webkit-scrollbar-thumb:hover{background:var(--accent-mystery)}::selection{background:var(--accent-mystery);color:#fff}:focus-visible{outline:2px solid var(--accent-hope);outline-offset:2px}.app{width:100%;height:100%;display:flex;flex-direction:column;background:linear-gradient(180deg,var(--bg-deep) 0%,var(--silence-deep) 100%)}.game{width:100%;height:100%;display:flex;flex-direction:column;position:relative;overflow:hidden}.game-main{flex:1;overflow-y:auto;padding:1rem}.chapter-overlay{position:fixed;inset:0;background:#0a0a12f2;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:100;animation:chapterFade 3s ease-in-out}.chapter-title{font-size:2rem;color:var(--accent-mystery);margin-bottom:1rem;animation:chapterSlide 3s ease-out}.chapter-description{color:var(--text-secondary);font-style:italic;animation:chapterSlide 3s ease-out .3s backwards}@keyframes chapterFade{0%,80%{opacity:1}to{opacity:0;pointer-events:none}}@keyframes chapterSlide{0%{opacity:0;transform:translateY(20px)}20%,80%{opacity:1;transform:translateY(0)}to{opacity:0}}.message-overlay{position:fixed;bottom:100px;left:50%;transform:translate(-50%);max-width:500px;padding:1rem 2rem;border-radius:8px;text-align:center;z-index:50;animation:messagePop .3s ease-out}.message-overlay.success{background:#2ed57326;border:1px solid var(--accent-discovery);color:var(--accent-discovery)}.message-overlay.locked{background:#ff6b6b26;border:1px solid var(--accent-warning);color:var(--accent-warning)}.message-overlay.victory{background:#ffd93d26;border:1px solid var(--accent-gold);color:var(--accent-gold)}@keyframes messagePop{0%{opacity:0;transform:translate(-50%) translateY(20px)}to{opacity:1;transform:translate(-50%) translateY(0)}}.victory-overlay{position:fixed;inset:0;background:#0a0a12fa;display:flex;align-items:center;justify-content:center;z-index:200;animation:victoryFade 1s ease-out}.victory-content{max-width:600px;padding:3rem;text-align:center}.victory-content h2{color:var(--accent-gold);font-size:2.5rem;margin-bottom:2rem;text-shadow:0 0 30px rgba(255,217,61,.5)}.victory-content p{color:var(--text-secondary);font-size:1.1rem;line-height:1.8;margin-bottom:1.5rem}.victory-content .final-message{color:var(--accent-hope);font-style:italic;font-size:1.2rem;margin-top:2rem;padding-top:2rem;border-top:1px solid rgba(78,205,196,.3)}.victory-content button{margin-top:2rem;background:var(--accent-mystery);color:#fff;padding:1rem 2rem;font-size:1.1rem}.victory-content button:hover{background:#7b6ba5}@keyframes victoryFade{0%{opacity:0}to{opacity:1}}.game-controls{position:fixed;bottom:1rem;right:1rem;display:flex;align-items:center;gap:1rem;z-index:20}.control-btn{background:#252542e6;color:var(--text-secondary);padding:.5rem 1rem;font-size:.85rem;border:1px solid rgba(255,255,255,.1)}.control-btn:hover{background:var(--bg-light);color:var(--text-primary)}.progress{color:var(--text-muted);font-size:.85rem}.atmosphere-indicator{font-size:1.2rem;cursor:help}.atmosphere-overlay{position:fixed;inset:0;pointer-events:none;z-index:1;transition:opacity 2s ease,background 2s ease}.atmosphere-overlay.dormant{background:radial-gradient(ellipse at center,transparent 0%,rgba(10,10,18,.3) 100%)}.atmosphere-overlay.stirring{background:radial-gradient(ellipse at center,rgba(107,91,149,.1) 0%,transparent 70%);animation:stirringPulse 4s ease-in-out infinite}.atmosphere-overlay.awakening{background:radial-gradient(ellipse at center,rgba(78,205,196,.15) 0%,transparent 60%);animation:awakeningPulse 3s ease-in-out infinite}@keyframes stirringPulse{0%,to{opacity:.3}50%{opacity:.5}}@keyframes awakeningPulse{0%,to{opacity:.4;transform:scale(1)}50%{opacity:.6;transform:scale(1.02)}}.final-analysis{background:#0006;border:1px solid rgba(107,91,149,.4);border-radius:12px;padding:1.5rem;margin:1.5rem 0}.final-analysis h3{color:var(--accent-gold);font-size:1.1rem;margin-bottom:1rem}.analysis-summary{display:flex;justify-content:center;gap:3rem;margin-bottom:1rem}.summary-stat{display:flex;flex-direction:column;align-items:center}.stat-value{font-size:2rem;font-family:var(--font-display);font-weight:700;color:var(--accent-hope)}.stat-label{font-size:.85rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:.1em}.analysis-verdict{color:var(--text-secondary)!important;font-size:1rem!important;font-style:italic;margin:0!important}.final-equation{background:#6b5b951a;border:1px solid rgba(107,91,149,.3);border-radius:12px;padding:1.5rem;margin-top:2rem}.final-equation p{margin-bottom:.75rem!important}.equation-display{font-family:var(--font-mono);font-size:1.5rem;color:var(--accent-gold);text-align:center;padding:1rem;background:#0000004d;border-radius:8px;margin-bottom:.75rem}.equation-meaning{color:var(--text-muted)!important;font-size:.95rem!important;font-style:italic;margin:0!important}.room{max-width:800px;margin:0 auto;padding:1.5rem;position:relative}.room.atmosphere-mysterious{background:linear-gradient(180deg,#1a1a2e80,#0a0a12cc)}.room.atmosphere-discovery{background:linear-gradient(180deg,#4ecdc40d,#0a0a12cc)}.room.atmosphere-tension{background:linear-gradient(180deg,#ff6b6b0d,#0a0a12cc)}.atmosphere-overlay{position:absolute;inset:0;pointer-events:none;background:radial-gradient(ellipse at top,transparent 50%,var(--bg-deep) 100%)}.room-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid rgba(107,91,149,.3)}.room-name{font-size:1.5rem;color:var(--text-primary)}.chapter-indicator{color:var(--accent-mystery);font-size:.85rem;font-style:italic;text-transform:capitalize}.room-description{margin-bottom:2rem;position:relative;z-index:1}.room-description p{color:var(--text-secondary);font-size:1.05rem;line-height:1.9;margin-bottom:1rem;text-indent:1.5em}.room-description p:first-child{text-indent:0}.interactables{margin-bottom:2rem;position:relative;z-index:1}.interactables h3{color:var(--text-muted);font-size:.9rem;font-weight:400;margin-bottom:.75rem}.interactable-list{display:flex;flex-wrap:wrap;gap:.5rem}.interactable-btn{background:#6b5b9526;color:var(--accent-mystery);padding:.5rem 1rem;border:1px solid rgba(107,91,149,.3);border-radius:4px;font-size:.95rem}.interactable-btn:hover{background:#6b5b9540;border-color:var(--accent-mystery)}.interactable-btn.examined{background:#4ecdc41a;color:var(--accent-hope);border-color:#4ecdc44d}.examined-mark{margin-left:.25rem;font-size:.8rem}.examine-panel{background:#1a1a2ef2;border:1px solid rgba(107,91,149,.4);border-radius:8px;padding:1.5rem;margin-bottom:2rem;position:relative;animation:panelSlide .3s ease-out}@keyframes panelSlide{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.examine-panel .close-btn{position:absolute;top:.75rem;right:.75rem;background:transparent;color:var(--text-muted);padding:.25rem .5rem;font-size:1rem}.examine-panel .close-btn:hover{color:var(--text-primary)}.examine-panel h4{color:var(--accent-hope);margin-bottom:1rem}.examine-text p{color:var(--text-secondary);font-size:1rem;line-height:1.8;margin-bottom:.75rem}.interactive-hint{color:var(--accent-gold);font-size:.9rem;margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(255,217,61,.2)}.reveal-text{color:var(--accent-discovery);font-size:.95rem;margin-top:1rem;padding:.75rem;background:#2ed5731a;border-radius:4px}.navigation{position:relative;z-index:1}.navigation h3{color:var(--text-muted);font-size:.9rem;font-weight:400;margin-bottom:.75rem}.exits{display:flex;flex-direction:column;gap:.5rem}.exit-btn{display:flex;align-items:center;gap:1rem;background:#252542cc;padding:.75rem 1rem;text-align:left;border:1px solid rgba(255,255,255,.1);border-radius:4px}.exit-btn:hover{background:#6b5b954d;border-color:var(--accent-mystery)}.exit-btn.locked{opacity:.6}.exit-btn.locked:hover{background:#ff6b6b1a;border-color:var(--accent-warning)}.direction{font-family:var(--font-display);font-weight:600;color:var(--text-primary);text-transform:uppercase;font-size:.85rem;min-width:60px}.exit-desc{color:var(--text-secondary);font-size:.95rem}.locked-desc em{color:var(--accent-warning)}.lesson-hint{margin-top:2rem;padding:1rem;background:#ffd93d14;border-left:3px solid var(--accent-gold);border-radius:0 4px 4px 0}.lesson-hint p{color:var(--accent-gold);font-style:italic;font-size:.95rem;margin:0}@media(max-width:768px){.room{padding:1rem}.room-header{flex-direction:column;gap:.5rem}.room-description p{font-size:1rem;text-indent:0}}.lesson-modal{position:fixed;inset:0;background:#0a0a12f2;display:flex;align-items:center;justify-content:center;z-index:100;padding:1rem;overflow-y:auto}.lesson-content{background:var(--bg-medium);border:1px solid rgba(107,91,149,.4);border-radius:12px;max-width:800px;width:100%;max-height:90vh;overflow-y:auto;padding:2rem;position:relative;animation:lessonSlide .4s ease-out}@keyframes lessonSlide{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.lesson-content .close-btn{position:absolute;top:1rem;right:1rem;background:transparent;color:var(--text-muted);padding:.5rem;font-size:1.25rem}.lesson-content .close-btn:hover{color:var(--text-primary)}.lesson-title{color:var(--accent-hope);margin-bottom:1.5rem;padding-right:2rem}.lesson-text{margin-bottom:2rem}.lesson-text p{color:var(--text-secondary);font-size:1.05rem;line-height:1.8;margin-bottom:1rem;white-space:pre-line}.interactive-section{margin-bottom:2rem}.try-btn{background:var(--accent-mystery);color:#fff;padding:.75rem 1.5rem;margin-bottom:1rem}.try-btn:hover{background:#7b6ba5}.interactive-content{background:#0000004d;border-radius:8px;padding:1.5rem;animation:fadeIn .3s ease}.instruction{color:var(--text-muted);font-size:.9rem;margin-bottom:1rem}.interval-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:.75rem}.interval-card{background:#252542cc;border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:1rem;transition:all .2s ease}.interval-card:hover{border-color:var(--accent-mystery)}.interval-card.selected{border-color:var(--accent-hope);background:#4ecdc41a}.interval-card h4{color:var(--text-primary);font-size:.95rem;margin-bottom:.25rem}.interval-card .semitones{color:var(--accent-mystery);font-size:.8rem;display:block;margin-bottom:.5rem}.interval-card .feeling{color:var(--text-secondary);font-size:.85rem;margin-bottom:.75rem}.interval-buttons{display:flex;gap:.5rem}.interval-buttons button{flex:1;background:var(--bg-light);color:var(--text-secondary);padding:.4rem;font-size:.8rem}.interval-buttons button:hover{background:var(--accent-mystery);color:#fff}.mode-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.75rem}.mode-card{background:#252542cc;border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:1rem;cursor:pointer;transition:all .2s ease}.mode-card:hover{border-color:var(--accent-mystery);transform:translateY(-2px)}.mode-card.selected{border-color:var(--accent-hope);background:#4ecdc41a}.mode-card h4{color:var(--text-primary);margin-bottom:.25rem}.mode-card .common-name{color:var(--accent-mystery);font-size:.85rem;display:block;margin-bottom:.5rem}.mode-card .feeling{color:var(--text-secondary);font-size:.9rem;margin-bottom:.5rem}.mode-card .character{color:var(--text-muted);font-size:.85rem;margin:0}.chord-explorer .root-selector{margin-bottom:1rem;display:flex;align-items:center;gap:.75rem}.chord-explorer label{color:var(--text-secondary)}.chord-explorer select{background:var(--bg-light);color:var(--text-primary);border:1px solid rgba(255,255,255,.2);padding:.5rem;border-radius:4px}.chord-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:.75rem}.chord-card{background:#252542cc;border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:1rem;cursor:pointer;transition:all .2s ease;text-align:center}.chord-card:hover{border-color:var(--accent-mystery)}.chord-card.selected{border-color:var(--accent-hope);background:#4ecdc41a}.chord-card h4{color:var(--text-primary);font-size:.9rem;margin-bottom:.25rem}.chord-card .symbol{color:var(--accent-gold);font-family:var(--font-mono);font-size:.85rem;display:block;margin-bottom:.5rem}.chord-card .feeling{color:var(--text-secondary);font-size:.8rem;margin:0}.melody-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.75rem}.melody-card{background:#252542cc;border:1px solid rgba(255,255,255,.1);border-radius:8px;padding:1rem;cursor:pointer;transition:all .2s ease}.melody-card:hover:not(.disabled){border-color:var(--accent-mystery);transform:translateY(-2px)}.melody-card.disabled{opacity:.6;cursor:not-allowed}.melody-card h4{color:var(--text-primary);margin-bottom:.5rem}.melody-card p{color:var(--text-secondary);font-size:.9rem;margin:0}.simple-piano{margin-top:1rem}.piano-keys{position:relative;display:flex;height:120px;max-width:400px;margin:0 auto}.simple-piano .white-key{flex:1;background:linear-gradient(180deg,#f8f8f8,#e8e8e8);border:1px solid #ccc;border-radius:0 0 4px 4px;cursor:pointer;display:flex;align-items:flex-end;justify-content:center;padding-bottom:8px}.simple-piano .white-key:hover{background:linear-gradient(180deg,#fff,#f0f0f0)}.simple-piano .white-key:active{background:var(--accent-hope)}.simple-piano .black-key{position:absolute;width:8%;height:60%;background:linear-gradient(180deg,#333,#111);border-radius:0 0 3px 3px;cursor:pointer;z-index:1}.simple-piano .black-key:hover{background:linear-gradient(180deg,#444,#222)}.simple-piano .black-key:active{background:var(--accent-mystery)}.simple-piano .key-label{font-size:.7rem;color:#666}.complete-btn{display:block;width:100%;background:linear-gradient(135deg,var(--accent-hope) 0%,#3db5a6 100%);color:#fff;padding:1rem;font-size:1.1rem;font-family:var(--font-display)}.complete-btn:hover{background:linear-gradient(135deg,#5ed5c6 0%,var(--accent-hope) 100%)}.piano-modal{position:fixed;inset:0;background:#0a0a12f2;display:flex;align-items:center;justify-content:center;z-index:100;padding:1rem}.piano-content{background:var(--bg-medium);border:1px solid rgba(107,91,149,.4);border-radius:12px;max-width:900px;width:100%;padding:2rem;position:relative;animation:pianoSlide .4s ease-out}@keyframes pianoSlide{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.piano-content .close-btn{position:absolute;top:1rem;right:1rem;background:transparent;color:var(--text-muted);padding:.5rem;font-size:1.25rem}.piano-content .close-btn:hover{color:var(--text-primary)}.piano-content h2{color:var(--accent-hope);margin-bottom:.5rem}.piano-instruction{color:var(--text-secondary);font-size:.9rem;margin-bottom:1.5rem}.piano-keyboard{position:relative;height:180px;margin-bottom:2rem;border-radius:0 0 8px 8px;overflow:hidden;box-shadow:0 4px 20px #00000080}.white-keys{display:flex;height:100%}.white-key{flex:1;background:linear-gradient(180deg,#fafafa,#e0e0e0);border:1px solid #bbb;border-top:none;cursor:pointer;display:flex;align-items:flex-end;justify-content:center;padding-bottom:10px;transition:background .1s ease}.white-key:hover{background:linear-gradient(180deg,#fff,#eee)}.white-key.active{background:linear-gradient(180deg,var(--accent-hope) 0%,#3db5a6 100%)}.white-key .key-label{font-family:var(--font-mono);font-size:.75rem;color:#666}.black-keys{position:absolute;top:0;left:0;right:0;height:60%;pointer-events:none}.black-key{position:absolute;width:30px;height:100%;background:linear-gradient(180deg,#333,#111);border-radius:0 0 4px 4px;cursor:pointer;pointer-events:auto;box-shadow:0 2px 5px #00000080;transition:background .1s ease}.black-key:hover{background:linear-gradient(180deg,#444,#222)}.black-key.active{background:linear-gradient(180deg,var(--accent-mystery) 0%,#4a4070 100%)}.chord-buttons{margin-bottom:1.5rem}.chord-buttons h3{color:var(--text-secondary);font-size:.95rem;font-weight:400;margin-bottom:.75rem}.chord-buttons .chord-grid{display:flex;flex-wrap:wrap;gap:.5rem}.chord-btn{background:#6b5b9533;color:var(--accent-mystery);padding:.5rem 1rem;border:1px solid rgba(107,91,149,.3);border-radius:4px;font-size:.9rem}.chord-btn:hover{background:#6b5b954d;border-color:var(--accent-mystery)}.chord-btn.active{background:var(--accent-mystery);color:#fff}.piano-hint{color:var(--text-muted);font-style:italic;font-size:.9rem;text-align:center;margin:0}.song-builder-modal{position:fixed;inset:0;background:#0a0a12f2;display:flex;align-items:center;justify-content:center;z-index:100;animation:fadeIn .3s ease}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.song-builder-content{background:var(--bg-card);border:1px solid rgba(107,91,149,.3);border-radius:16px;padding:2rem;max-width:480px;width:90%;max-height:85vh;overflow-y:auto;position:relative}.song-builder-content h2{color:var(--accent-gold);text-align:center;margin-bottom:.5rem;font-size:1.5rem}.builder-intro{color:var(--text-muted);text-align:center;font-size:.9rem;margin-bottom:1.5rem}.close-btn{position:absolute;top:1rem;right:1rem;background:none;border:none;color:var(--text-muted);font-size:1.5rem;cursor:pointer;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s}.close-btn:hover{background:#ffffff1a;color:var(--text-primary)}.mode-selector{margin-bottom:1.5rem}.mode-chips{display:flex;justify-content:center;gap:.5rem;flex-wrap:wrap}.mode-chip{background:#0000004d;border:1px solid rgba(255,255,255,.1);color:var(--text-secondary);padding:.4rem .8rem;font-size:.8rem;border-radius:20px;cursor:pointer;transition:all .2s}.mode-chip:hover{border-color:#6b5b9580;color:var(--text-primary)}.mode-chip.selected{background:#6b5b954d;border-color:var(--accent-mystery);color:var(--text-primary)}.note-palette{margin-bottom:1.5rem}.scale-notes{display:flex;justify-content:center;gap:.4rem;flex-wrap:wrap}.scale-note{width:44px;height:44px;border-radius:8px;background:#0006;border:1px solid rgba(255,255,255,.15);color:var(--text-primary);font-size:.9rem;font-weight:500;cursor:pointer;transition:all .15s}.scale-note:hover:not(:disabled){background:#6b5b954d;border-color:var(--accent-mystery);transform:translateY(-2px)}.scale-note:active:not(:disabled){transform:translateY(0);background:#6b5b9580}.scale-note:disabled{opacity:.4;cursor:not-allowed}.melody-display{background:#0000004d;border-radius:12px;padding:1rem;margin-bottom:1rem;min-height:80px}.melody-header{display:flex;justify-content:flex-end;margin-bottom:.5rem}.note-count{font-family:var(--font-mono);font-size:.8rem;transition:color .3s}.melody-notes{display:flex;flex-wrap:wrap;gap:.35rem;min-height:36px;align-items:center}.empty-melody{color:var(--text-muted);font-size:.85rem;font-style:italic}.melody-note{background:#ffffff0d;border:1px solid;border-radius:6px;padding:.3rem .5rem;font-size:.85rem;font-family:var(--font-mono);color:var(--text-primary);animation:noteAppear .2s ease;transition:border-color .3s}@keyframes noteAppear{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}.builder-controls{display:flex;justify-content:center;gap:.5rem;margin-bottom:1rem}.builder-controls button{background:#0000004d;border:1px solid rgba(255,255,255,.1);color:var(--text-secondary);padding:.5rem 1rem;font-size:.85rem;border-radius:6px;cursor:pointer;transition:all .2s}.builder-controls button:hover:not(:disabled){background:#ffffff1a;color:var(--text-primary)}.builder-controls button:disabled{opacity:.4;cursor:not-allowed}.builder-controls .play-btn{background:#6b5b954d;border-color:var(--accent-mystery);color:var(--text-primary)}.builder-controls .play-btn:hover:not(:disabled){background:#6b5b9580}.completion-section{text-align:center;margin-bottom:1rem}.progress-hint{color:var(--text-muted);font-size:.85rem;margin:0;min-height:1.5em}.complete-btn{background:linear-gradient(135deg,var(--accent-mystery) 0%,var(--accent-hope) 100%);border:none;color:#fff;padding:.75rem 2rem;font-size:1rem;font-weight:600;border-radius:8px;cursor:pointer;transition:all .3s}.complete-btn:hover:not(:disabled){transform:scale(1.02);box-shadow:0 4px 20px #6b5b9566}.complete-btn:disabled{opacity:.6;cursor:not-allowed}.analysis-section{border-top:1px solid rgba(255,255,255,.1);padding-top:1rem;margin-top:1rem}.analysis-toggle{background:none;border:none;color:var(--text-muted);font-size:.8rem;cursor:pointer;padding:.25rem .5rem;border-radius:4px;transition:all .2s;width:100%;text-align:center}.analysis-toggle:hover{color:var(--text-secondary);background:#ffffff0d}.analysis-panel{margin-top:.75rem;padding:1rem;background:#0003;border-radius:8px;animation:slideDown .2s ease}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.analysis-row{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem}.analysis-label{color:var(--text-muted);font-size:.8rem;width:80px}.mini-meter{flex:1;height:6px;background:#0006;border-radius:3px;overflow:hidden}.mini-fill{height:100%;border-radius:3px;transition:width .4s ease,background-color .4s ease}.analysis-value{font-family:var(--font-mono);font-size:.8rem;color:var(--text-secondary);width:35px;text-align:right}.analysis-status{font-size:.85rem;font-weight:500}.analysis-formula{display:flex;justify-content:center;gap:.75rem;font-family:var(--font-mono);font-size:.75rem;color:var(--text-muted);margin:.75rem 0;padding:.5rem;background:#0003;border-radius:4px}.analysis-formula .vs{color:var(--text-secondary)}.analysis-tips{margin-top:.5rem}.tip{font-size:.8rem;margin:.25rem 0;padding:.35rem .5rem;border-radius:4px;background:#0003}.tip-success{color:var(--accent-hope);border-left:2px solid var(--accent-hope)}.tip-warning{color:var(--accent-warning);border-left:2px solid var(--accent-warning)}.tip-tip{color:var(--accent-mystery);border-left:2px solid var(--accent-mystery)}.tip-info{color:var(--text-secondary);border-left:2px solid var(--text-muted)}@media(max-width:500px){.song-builder-content{padding:1.5rem;max-height:90vh}.scale-note{width:38px;height:38px;font-size:.85rem}.mode-chip{font-size:.75rem;padding:.3rem .6rem}}.silence-meter{position:fixed;top:1rem;left:1rem;right:1rem;max-width:300px;background:#1a1a2ee6;border:1px solid rgba(107,91,149,.3);border-radius:8px;padding:.75rem 1rem;z-index:50;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.meter-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.meter-label{color:var(--text-secondary);font-size:.85rem;font-family:var(--font-display);letter-spacing:.05em}.meter-value{color:var(--text-primary);font-family:var(--font-mono);font-size:.9rem}.meter-bar{position:relative;height:8px;background:#00000080;border-radius:4px;overflow:hidden;margin-bottom:.5rem}.meter-fill{height:100%;border-radius:4px;transition:width 1s ease-out,background 1s ease}.meter-markers{position:absolute;inset:0;display:flex;justify-content:space-between;padding:0 2px}.marker{width:1px;height:100%;background:#ffffff1a}.equation-visual{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;margin-bottom:.5rem;border-bottom:1px solid rgba(107,91,149,.2)}.equation-side{display:flex;flex-direction:column;align-items:center;gap:.15rem}.eq-label{font-size:.65rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:.05em}.eq-value{font-family:var(--font-mono);font-size:.75rem}.equation-side.growth .eq-value{color:var(--accent-hope)}.equation-side.decay .eq-value{color:var(--accent-mystery)}.equation-vs{font-size:1rem;font-weight:700}.equation-vs .winning{color:var(--accent-hope);animation:vsWinPulse 1.5s ease-in-out infinite}.equation-vs .losing{color:#ff6b6b}@keyframes vsWinPulse{0%,to{opacity:.7}50%{opacity:1}}.meter-footer{display:flex;justify-content:space-between;align-items:center}.lessons-count{color:var(--text-muted);font-size:.75rem}.meter-hint{color:var(--accent-mystery);font-size:.75rem;font-style:italic;animation:hintPulse 3s ease-in-out infinite}@keyframes hintPulse{0%,to{opacity:.7}50%{opacity:1}}.silence-meter:has(.meter-fill[style*="width: 8"]),.silence-meter:has(.meter-fill[style*="width: 9"]),.silence-meter:has(.meter-fill[style*="width: 100"]){border-color:#ff6b6b4d}.silence-meter:has(.meter-fill[style*="width: 2"]),.silence-meter:has(.meter-fill[style*="width: 3"]),.silence-meter:has(.meter-fill[style*="width: 4"]){border-color:#4ecdc44d}@media(max-width:768px){.silence-meter{max-width:none;left:.5rem;right:.5rem}}.title-screen{width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;background:radial-gradient(ellipse at center,var(--bg-dark) 0%,var(--bg-deep) 70%)}.title-content{max-width:700px;padding:2rem;text-align:center;z-index:10}.title{font-size:3rem;color:var(--text-primary);text-shadow:0 0 30px rgba(107,91,149,.5);margin-bottom:.5rem;animation:titleFade 2s ease-out}.subtitle{font-size:1.25rem;color:var(--accent-mystery);font-style:italic;margin-bottom:2rem;opacity:0;transition:opacity 1s ease}.subtitle.visible{opacity:1}.premise{max-width:550px;margin:0 auto 2rem;opacity:0;transition:opacity 1.5s ease}.premise.visible{opacity:1}.premise p{color:var(--text-secondary);font-size:1.1rem;line-height:1.8;margin-bottom:1rem}.premise .cryptic{color:var(--accent-hope);font-style:italic;font-size:1.2rem;padding:1rem;border-left:2px solid var(--accent-hope);margin-top:1.5rem;text-align:left}.learn-info{background:#6b5b951a;border:1px solid rgba(107,91,149,.3);border-radius:8px;padding:1.5rem;margin-bottom:2rem;opacity:0;transition:opacity 1.5s ease;text-align:left}.learn-info.visible{opacity:1}.learn-info h3{color:var(--accent-mystery);font-size:1rem;margin-bottom:.75rem}.learn-info ul{list-style:none;padding:0;margin-bottom:1rem}.learn-info li{color:var(--text-secondary);padding:.4rem 0 .4rem 1.5rem;position:relative}.learn-info li:before{content:"â™ª";position:absolute;left:0;color:var(--accent-hope)}.no-experience{color:var(--accent-discovery);font-style:italic;font-size:.9rem;text-align:center;margin:0}.start-button{background:linear-gradient(135deg,var(--accent-mystery) 0%,#4a4070 100%);color:#fff;padding:1rem 3rem;font-size:1.2rem;border-radius:8px;opacity:0;transform:translateY(20px);transition:all .5s ease;display:flex;flex-direction:column;align-items:center;margin:0 auto 2rem}.start-button.visible{opacity:1;transform:translateY(0)}.start-button:hover{background:linear-gradient(135deg,#7b6ba5 0%,var(--accent-mystery) 100%);transform:translateY(-2px);box-shadow:0 10px 30px #6b5b9566}.button-text{font-family:var(--font-display);font-size:1.3rem}.button-subtext{font-size:.75rem;opacity:.7;margin-top:.25rem}.credits{opacity:0;transition:opacity 1.5s ease}.credits.visible{opacity:1}.credits p{font-size:.85rem;color:var(--text-muted);margin-bottom:.25rem}.fog{position:absolute;width:200%;height:200%;background:url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.008' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");opacity:.03;pointer-events:none}.fog-1{animation:fogDrift1 60s linear infinite}.fog-2{animation:fogDrift2 80s linear infinite reverse;opacity:.02}@keyframes fogDrift1{0%{transform:translate(0)}to{transform:translate(-50%,-50%)}}@keyframes fogDrift2{0%{transform:translate(0)}to{transform:translate(50%,25%)}}.vignette{position:absolute;inset:0;background:radial-gradient(ellipse at center,transparent 40%,var(--bg-deep) 100%);pointer-events:none}@keyframes titleFade{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media(max-width:768px){.title{font-size:2rem}.title-content{padding:1rem}.premise p{font-size:1rem}}
